{"version":3,"sources":["../../src/pages/apt-notifikasi/apt-notifikasi.module.ts","../../src/pages/apt-detail/apt-detail.ts","../../src/pages/apt-notifikasi/apt-notifikasi.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { IonicPageModule } from \"ionic-angular\";\r\nimport { AptNotifikasiPage } from \"./apt-notifikasi\";\r\nimport { ComponentsModule } from \"../../components/components.module\";\r\nimport { PipesModule } from \"../../pipes/pipes.module\";\r\n\r\n@NgModule({\r\n  declarations: [AptNotifikasiPage],\r\n  imports: [\r\n    IonicPageModule.forChild(AptNotifikasiPage),\r\n    ComponentsModule,\r\n    PipesModule\r\n  ]\r\n})\r\nexport class AptNotifikasiPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apt-notifikasi/apt-notifikasi.module.ts","import { Component } from \"@angular/core\";\r\nimport { NavParams, NavController, IonicPage } from \"ionic-angular\";\r\nimport { AptDetailActionPage } from \"../apt-detail-action/apt-detail-action\";\r\nimport { AptAction } from \"../../constant/apt-action\";\r\nimport { AptProvider } from \"../../providers/apt/apt\";\r\nimport { LoaderHelper } from \"../../helpers/loader-helper\";\r\nimport { AptHelper } from \"../../helpers/apt-helper\";\r\nimport { File } from \"@ionic-native/file\";\r\nimport { APT_INDIKATOR } from \"../../constant/apt-indikator\";\r\nimport { ToastHelper } from \"../../helpers/toast-helper\";\r\nimport { UserProvider } from \"../../providers/user/user\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-apt-detail\",\r\n  templateUrl: \"apt-detail.html\"\r\n})\r\nexport class AptDetailPage {\r\n\r\n  static TAG:string = 'AptDetailPage'\r\n\r\n  itemId: any;\r\n  ACTION = AptAction;\r\n  aptIndikator = APT_INDIKATOR;\r\n  aptDetail: any = {};\r\n  fileDirectory: any;\r\n  profile: any;\r\n  aptVerifikasi: any;\r\n  constructor(\r\n    private navParams: NavParams,\r\n    private navCtrl: NavController,\r\n    private aptProvider: AptProvider,\r\n    private loaderHelper: LoaderHelper,\r\n    file: File,\r\n    private aptHelper: AptHelper,\r\n    private toast: ToastHelper,\r\n    private userProvider: UserProvider\r\n  ) {\r\n    this.fileDirectory = file.externalRootDirectory + \"Download\";\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.itemId = this.navParams.get(\"itemId\");\r\n    this.getDetailApt();\r\n    this.getProfile();\r\n  }\r\n\r\n  getProfile() {\r\n    this.userProvider.getProfile().subscribe(res => {\r\n      this.profile = res;\r\n    });\r\n  }\r\n\r\n  async getDetailApt() {\r\n    await this.loaderHelper.createLoader();\r\n\r\n    this.aptProvider.getDetailApt(this.itemId).subscribe(\r\n      res => {\r\n        const response = res.response;\r\n        this.aptDetail = response.permohonan;\r\n        this.aptVerifikasi = response.permohonanVerifikasi;\r\n        this.readNotifikasi();\r\n        this.loaderHelper.dismiss();\r\n      },\r\n      err => {\r\n        this.loaderHelper.errorHandleLoader(err, this.navCtrl);\r\n      }\r\n    );\r\n  }\r\n\r\n  detailAction(action: string, itemId: any) {\r\n    this.navCtrl.push(AptDetailActionPage, { action: action, itemId: itemId });\r\n  }\r\n\r\n  //read notifikasi\r\n  readNotifikasi() {\r\n    this.aptProvider\r\n      .readNotifikasi(this.itemId)\r\n      .subscribe(res => true, err => true);\r\n  }\r\n\r\n  async downloadPermohonan(fileApt) {\r\n    try {\r\n      const targetPath = `${this.fileDirectory}/${fileApt.nomorTiket}.pdf`;\r\n\r\n      await this.loaderHelper.createLoader();\r\n\r\n      const checkPermission = await this.aptHelper.checkPermission();\r\n\r\n      // check if apps has permission to write storage\r\n      if (!checkPermission.hasPermission) {\r\n        await this.aptHelper.requestPermission();\r\n      }\r\n\r\n      this.aptProvider.download(fileApt.id, targetPath);\r\n\r\n      this.toast.present(\"File telah di download\");\r\n      this.loaderHelper.dismiss();\r\n\r\n      // open file after download\r\n      // await this.aptHelper.openFile(targetPath);\r\n    } catch (error) {\r\n      this.loaderHelper.dismiss();\r\n      this.toast.present(error);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apt-detail/apt-detail.ts","import { Component } from \"@angular/core\";\r\nimport { IonicPage, NavController } from \"ionic-angular\";\r\nimport { AptProvider } from \"../../providers/apt/apt\";\r\nimport { LoaderHelper } from \"../../helpers/loader-helper\";\r\nimport { AptDetailPage } from \"../apt-detail/apt-detail\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-apt-notifikasi\",\r\n  templateUrl: \"apt-notifikasi.html\"\r\n})\r\nexport class AptNotifikasiPage {\r\n  notifications: any[] = [];\r\n  page: number = 0;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    private aptProvider: AptProvider,\r\n    private loader: LoaderHelper\r\n  ) {}\r\n\r\n  ionViewWillEnter() {\r\n    this.getListNotification();\r\n  }\r\n\r\n  getListNotification() {\r\n    this.loader.createLoader();\r\n\r\n    this.aptProvider.getListNotification().subscribe(\r\n      res => {\r\n        this.notifications = res;\r\n        this.loader.dismiss();\r\n      },\r\n      err => this.loader.dismiss()\r\n    );\r\n  }\r\n\r\n  doInfinite(infiniteScroll) {\r\n    this.page = this.page + 1;\r\n    setTimeout(() => {\r\n      this.aptProvider.getListNotification(this.page).subscribe(res => {\r\n        for (var index = 0; index < res.length; index++) {\r\n          this.notifications.push(res[index]);\r\n        }\r\n      });\r\n      infiniteScroll.complete();\r\n    }, 1000);\r\n  }\r\n\r\n  goToAptDetail(aptId: number) {\r\n    this.navCtrl.push(AptDetailPage.TAG, { itemId: aptId });\r\n  }\r\n\r\n  statusRead(isRead: number) {\r\n    return isRead === 0 ? \"Belum dibaca\" : \"Sudah dibaca\";\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apt-notifikasi/apt-notifikasi.ts"],"sourceRoot":""}