{"version":3,"sources":["../../src/pages/apt-detail/apt-detail.module.ts","../../src/pages/apt-history/apt-history.ts","../../src/pages/apt-detail/apt-detail.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAyC;AACO;AACsB;AACf;AACV;AAU7C;IAAA;IAAkC,CAAC;IAAtB,mBAAmB;QAR/B,uEAAQ,CAAC;YACR,YAAY,EAAE,CAAC,kEAAa,CAAC;YAC7B,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,kEAAa,CAAC;gBACvC,uFAAgB;gBAChB,wEAAW;aACZ;SACF,CAAC;OACW,mBAAmB,CAAG;IAAD,0BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;ACdU;AACe;AAOzD;IAOE,wBAAmB,OAAsB,EAAS,SAAoB;QAAnD,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;IAAG,CAAC;IAE1E,uCAAc,GAAd;IAEA,CAAC;IATM,kBAAG,GAAU,gBAAgB;IAFzB,cAAc;QAL1B,wEAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;WACG;SAChC,CAAC;uBASsE;OAP3D,cAAc,CAY1B;IAAD,CAAC;AAAA;SAZY,cAAc,gB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRe;AACe;AACoB;AACvB;AACA;AACK;AACN;AACX;AACmB;AACJ;AACA;AACG;AAO5D;IAWE,uBACU,SAAoB,EACpB,OAAsB,EACtB,WAAwB,EACxB,YAA0B,EAClC,IAAU,EACF,SAAoB,EACpB,KAAkB,EAClB,YAA0B;QAP1B,cAAS,GAAT,SAAS,CAAW;QACpB,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAc;QAE1B,cAAS,GAAT,SAAS,CAAW;QACpB,UAAK,GAAL,KAAK,CAAa;QAClB,iBAAY,GAAZ,YAAY,CAAc;QAdpC,WAAM,GAAG,uEAAS,CAAC;QACnB,iBAAY,GAAG,8EAAa,CAAC;QAC7B,cAAS,GAAQ,EAAE,CAAC;QAclB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,qBAAqB,GAAG,UAAU,CAAC;IAC/D,CAAC;IAED,wCAAgB,GAAhB;QACE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,kCAAU,GAAV;QAAA,iBAIC;QAHC,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,aAAG;YAC1C,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,oCAAY,GAAlB;;;;;4BACE,qBAAM,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE;;wBAA9B,SAA8B;wBAE9B,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAClD,aAAG;4BACD,IAAM,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;4BAC9B,KAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC;4BACrC,KAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,oBAAoB,CAAC;4BACnD,KAAI,CAAC,cAAc,EAAE,CAAC;4BACtB,KAAI,CAAC,YAAY,CAAC,aAAa,EAAE;wBACnC,CAAC,EACD,aAAG;4BACD,KAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,GAAG,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;wBACzD,CAAC,CACF,CAAC;;;;;KACH;IAED,oCAAY,GAAZ,UAAa,MAAc,EAAE,MAAW;QACtC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iGAAmB,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;IAC7E,CAAC;IAED,iBAAiB;IACjB,sCAAc,GAAd;QACE,IAAI,CAAC,WAAW;aACb,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC;aAC3B,SAAS,CAAC,aAAG,IAAI,WAAI,EAAJ,CAAI,EAAE,aAAG,IAAI,WAAI,EAAJ,CAAI,CAAC,CAAC;IACzC,CAAC;IAEK,0CAAkB,GAAxB,UAAyB,OAAO;;;;;;;wBAEtB,UAAU,GAAM,IAAI,CAAC,aAAa,SAAI,OAAO,CAAC,UAAU,SAAM,CAAC;wBAErE,qBAAM,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE;;wBAA9B,SAA8B;wBAEN,qBAAM,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;;wBAAxD,eAAe,GAAG,SAAsC;6BAG1D,CAAC,eAAe,CAAC,aAAa,EAA9B,wBAA8B;wBAChC,qBAAM,IAAI,CAAC,SAAS,CAAC,iBAAiB,EAAE;;wBAAxC,SAAwC,CAAC;;;wBAG3C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;wBAElD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;wBAC7C,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE;;;;wBAKjC,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE;wBACjC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAK,CAAC,CAAC;;;;;;KAE7B;IAED,mCAAW,GAAX;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iFAAc,CAAC,GAAG,CAAC;IACvC,CAAC;IA1FM,iBAAG,GAAU,eAAe;IAFxB,aAAa;QAJzB,wEAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;WACG;SAC/B,CAAC;iFAa8B;YACX,wEAAa;YACT,4EAAW;YACV,iEAAY;YAC5B,sEAAI;YACS,0EAAS;YACb,2EAAW;YACJ,UAAY;OAnBzB,aAAa,CA8FzB;IAAD,CAAC;AAAA;SA9FY,aAAa,gB","file":"6.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { IonicPageModule } from \"ionic-angular\";\r\nimport { ComponentsModule } from \"../../components/components.module\";\r\nimport { PipesModule } from \"../../pipes/pipes.module\";\r\nimport { AptDetailPage } from \"./apt-detail\";\r\n\r\n@NgModule({\r\n  declarations: [AptDetailPage],\r\n  imports: [\r\n    IonicPageModule.forChild(AptDetailPage),\r\n    ComponentsModule,\r\n    PipesModule\r\n  ]\r\n})\r\nexport class AptDetailPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apt-detail/apt-detail.module.ts","import { Component } from \"@angular/core\";\r\nimport { NavParams, NavController, IonicPage } from \"ionic-angular\";\r\n\r\n@Component({\r\n  selector: \"page-apt-history\",\r\n  templateUrl: \"apt-history.html\"\r\n})\r\n@IonicPage()\r\nexport class AptHistoryPage {\r\n\r\n  static TAG:string = 'AptHistoryPage'\r\n\r\n  action: string;\r\n  itemId: number;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {}\r\n\r\n  ionViewDidLoad() {\r\n    \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apt-history/apt-history.ts","import { Component } from \"@angular/core\";\r\nimport { NavParams, NavController, IonicPage } from \"ionic-angular\";\r\nimport { AptDetailActionPage } from \"../apt-detail-action/apt-detail-action\";\r\nimport { AptAction } from \"../../constant/apt-action\";\r\nimport { AptProvider } from \"../../providers/apt/apt\";\r\nimport { LoaderHelper } from \"../../helpers/loader-helper\";\r\nimport { AptHelper } from \"../../helpers/apt-helper\";\r\nimport { File } from \"@ionic-native/file\";\r\nimport { APT_INDIKATOR } from \"../../constant/apt-indikator\";\r\nimport { ToastHelper } from \"../../helpers/toast-helper\";\r\nimport { UserProvider } from \"../../providers/user/user\";\r\nimport { AptHistoryPage } from \"../apt-history/apt-history\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-apt-detail\",\r\n  templateUrl: \"apt-detail.html\"\r\n})\r\nexport class AptDetailPage {\r\n\r\n  static TAG:string = 'AptDetailPage'\r\n\r\n  itemId: any;\r\n  ACTION = AptAction;\r\n  aptIndikator = APT_INDIKATOR;\r\n  aptDetail: any = {};\r\n  fileDirectory: any;\r\n  profile: any;\r\n  aptVerifikasi: any;\r\n  constructor(\r\n    private navParams: NavParams,\r\n    private navCtrl: NavController,\r\n    private aptProvider: AptProvider,\r\n    private loaderHelper: LoaderHelper,\r\n    file: File,\r\n    private aptHelper: AptHelper,\r\n    private toast: ToastHelper,\r\n    private userProvider: UserProvider\r\n  ) {\r\n    this.fileDirectory = file.externalRootDirectory + \"Download\";\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.itemId = this.navParams.get(\"itemId\");\r\n    this.getDetailApt();\r\n    this.getProfile();\r\n  }\r\n\r\n  getProfile() {\r\n    this.userProvider.getProfile().subscribe(res => {\r\n      this.profile = res;\r\n    });\r\n  }\r\n\r\n  async getDetailApt() {\r\n    await this.loaderHelper.show()\r\n\r\n    this.aptProvider.getDetailApt(this.itemId).subscribe(\r\n      res => {\r\n        const response = res.response;\r\n        this.aptDetail = response.permohonan;\r\n        this.aptVerifikasi = response.permohonanVerifikasi;\r\n        this.readNotifikasi();\r\n        this.loaderHelper.dismissLoader()\r\n      },\r\n      err => {\r\n        this.loaderHelper.errorHandleLoader(err, this.navCtrl);\r\n      }\r\n    );\r\n  }\r\n\r\n  detailAction(action: string, itemId: any) {\r\n    this.navCtrl.push(AptDetailActionPage, { action: action, itemId: itemId });\r\n  }\r\n\r\n  //read notifikasi\r\n  readNotifikasi() {\r\n    this.aptProvider\r\n      .readNotifikasi(this.itemId)\r\n      .subscribe(res => true, err => true);\r\n  }\r\n\r\n  async downloadPermohonan(fileApt) {\r\n    try {\r\n      const targetPath = `${this.fileDirectory}/${fileApt.nomorTiket}.pdf`;\r\n\r\n      await this.loaderHelper.show()\r\n\r\n      const checkPermission = await this.aptHelper.checkPermission();\r\n\r\n      // check if apps has permission to write storage\r\n      if (!checkPermission.hasPermission) {\r\n        await this.aptHelper.requestPermission();\r\n      }\r\n\r\n      this.aptProvider.download(fileApt.id, targetPath);\r\n\r\n      this.toast.present(\"File telah di download\");\r\n      this.loaderHelper.dismissLoader()\r\n\r\n      // open file after download\r\n      // await this.aptHelper.openFile(targetPath);\r\n    } catch (error) {\r\n      this.loaderHelper.dismissLoader()\r\n      this.toast.present(error);\r\n    }\r\n  }\r\n\r\n  openHistory() {\r\n    this.navCtrl.push(AptHistoryPage.TAG)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/apt-detail/apt-detail.ts"],"sourceRoot":""}