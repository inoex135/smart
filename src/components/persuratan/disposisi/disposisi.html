<!-- disposisi unit or personal component?.unitOrPersonal -->
<ion-grid *ngIf="currentStep == arraySteps[0]">

    <div *ngIf="!isEselon4()">
        <h4>Disposisi Kepada</h4>
        <ion-row>
            <ion-col col-12>
                <ion-list class="disposition-type">
                    <ion-item class="item custom-ion-item" no-lines *ngIf="profile?.jenis_eselon < 4">
                        <ion-checkbox (ionChange)="selectDisposisi('UNIT')" color="primary" [checked]="disposisiTarget?.unit" [value]="UNIT"></ion-checkbox>
                        <ion-label text-wrap>UNIT</ion-label>
                    </ion-item>
                    <ion-item class="item custom-ion-item" no-lines>
                        <ion-checkbox (ionChange)="selectDisposisi('PERSONAL')" color="primary" [checked]="disposisiTarget?.personal" [value]="PERSONAL"></ion-checkbox>
                        <ion-label text-wrap>PERSONAL</ion-label>
                    </ion-item>
                </ion-list>
            </ion-col>
        </ion-row>
    </div>

    <h4>Sifat Disposisi</h4>
    <ion-col col-12>
        <ion-item class="input--form custom-ion-item">
            <ion-select name="sifatSurat" [(ngModel)]="disposisi.sifatSurat" placeholder="Sifat">
                <ion-option [value]="sifat?.kode" *ngFor="let sifat of datas?.sifatSurat">
                    {{sifat?.keterangan}}
                </ion-option>
            </ion-select>
        </ion-item>
    </ion-col>

    <h4>Catatan</h4>
    <ion-row>
        <ion-col col-12>
            <ion-item margin-top no-padding class="textarea--form custom-ion-item">
                <ion-textarea placeholder="Catatan" type="text" [(ngModel)]="disposisi.catatan"></ion-textarea>
            </ion-item>
        </ion-col>
    </ion-row>

    <h4>Tanggal Selesai</h4>
    <ion-col col-12>
        <ion-item class="input--form custom-ion-item" margin-bottom margin-top>
            <ion-input #targetSelesai="ngModel" placeholder="Target Selesai" [(ngModel)]="disposisi.tanggalSelesai" (tap)="tanggalSelesaiPicker()"
                        type="text">
            </ion-input>
        </ion-item>
        
<!--         <ion-item no-line>
            <p ion-text color="danger" *ngFor="let error of errorMessages?.errors">
                *{{error?.field}} {{error?.message}}
            </p>
        </ion-item> -->

    </ion-col>

</ion-grid>


<!-- disposisi pilih sifat component?.disposisiSifat -->
<ion-grid *ngIf="currentStep == arraySteps[1]">
    <h4>Petunjuk</h4>
    <ion-row>
        <ion-col col-12>
            <ion-item class="custom-ion-item petunjuk" no-lines *ngFor="let petunjuk of datas?.petunjuk; let i = index">
                <ion-label text-wrap>{{petunjuk?.keterangan}}</ion-label>
                <ion-checkbox [checked]="petunjuk?.isChecked" color="primary" name="petunjuk[i]" (ionChange)="onChange(petunjuk?.id, $event.checked, i)"></ion-checkbox>
            </ion-item>
        </ion-col>
    </ion-row>
</ion-grid>

<!-- target disposisi untuk personal atau unit component?.disposisiUnit || component?.disposisiPersonal -->
<ion-grid *ngIf="currentStep == arraySteps[2]">
    <!-- disposisi unit -->
    <h4>Disposisi Kepada Unit</h4>
    <h6><span class="danger-star">*</span> Jika Tujuan Disposisi Lebih dari 2, maka Lead Wajib dipilih</h6>
    <ion-row>
        <ion-col col-12>
            <ion-list class="title-list">
                <ion-item class="item custom-ion-item" *ngFor="let jabatan of datas?.jabatan; let i = index" no-lines>
                    <ion-label text-wrap>{{jabatan?.uraian_jabatan}}</ion-label>
                    <ion-checkbox [checked]="jabatan?.kode_utuh == disposisi?.unitTujuan[0]?.kode_utuh" (ionChange)="selectUnit(jabatan, $event.checked)"
                        [value]="jabatan?.kode"></ion-checkbox>
                </ion-item>
            </ion-list>
        </ion-col>
    </ion-row>

    <ion-row *ngIf="disposisi?.unitTujuan?.length > 1">
        <h4>Lead <span class="danger-star">*</span></h4>
        <ion-col col-12>
            <ion-item class="input--form custom-ion-item">
                <ion-select [(ngModel)]="disposisi.leader">
                    <ion-option [selected]="unit?.kode_utuh == disposisi?.leader" [value]="unit?.kode_utuh" text-wrap *ngFor="let unit of disposisi?.unitTujuan">
                        {{unit?.uraian_jabatan}}
                    </ion-option>
                </ion-select>
            </ion-item>
        </ion-col>
    </ion-row>

    <!-- disposisi personal -->
    <div *ngIf="component?.disposisiPersonal">
        <h4>Disposisi Kepada Personal</h4>
        <div *ngIf="!isEselon4()">
            <ion-row *ngIf="component?.disposisiPersonal">
                <ion-col col-12>
                    <ng-template #withFlags let-attrs="attrs">
                        <span>{{attrs?.data?.nip}}, {{attrs?.data?.nama}}</span>
                    </ng-template>
    
                    <ion-auto-complete [dataProvider]="masterPegawai" #searchbar [template]="withFlags"></ion-auto-complete>
    
                    <ion-item class="input--form custom-ion-item">
                        <ion-input type="text" placeholder="Selaku" [(ngModel)]="pelaku"></ion-input>
                    </ion-item>

                    <ion-item class="add-personel" no-lines center item-center>
                        <button clear [disabled]="searchbar?.getSelection() == null" ion-button small color="default-blue" (tap)="addDisposisiPersonalDanPersonal(disposisi?.selaku, pelaku)">
                            <ion-icon name="add"></ion-icon> Tambah Personil
                        </button>
                    </ion-item>
    
                    <ion-item no-lines class="as-list bordered-ion-item" *ngFor="let selaku of disposisi?.selaku; let i = index;">
                        <h2 text-wrap>Nama: {{disposisi?.personal[i]?.nama}}</h2>
                        <p>Selaku: {{selaku}}</p>
                        <button clear (click)="removeData(disposisi?.selaku, i)" ion-button color="light" item-end>
                            <ion-icon name="trash"></ion-icon>
                        </button>
                    </ion-item>
                </ion-col>
            </ion-row>
        </div>
        
        <div class="disposisi-padding-top-form" *ngIf="isEselon4()">
            <ion-row *ngIf="component?.disposisiPersonal" class="row">
                <div *ngFor="let pelaksana of datas?.pelaksana; let i = index" col-12 class="pelaksana">
                    <ion-item no-lines class="item custom-ion-item">
                        <ion-label text-wrap>{{pelaksana?.nama}}</ion-label>
                        <ion-checkbox [checked]="pelaksana?.isChecked" (ionChange)="selectPelaksana(pelaksana, $event.checked, i)" color="primary"
                            [value]="pelaksana?.nip" name="pelaksana[i]"></ion-checkbox>
                    </ion-item>
                    <ion-item class="input--form custom-ion-item">
                        <ion-input type="text" placeholder="Selaku" [(ngModel)]="disposisi.selaku[i]"></ion-input>
                    </ion-item>
                </div>
            </ion-row>
        </div>
    </div>  
</ion-grid>

<div class="spacer"></div>
<div class="stepper-bottom-navigation">
    <button *ngIf="hidePrevButton()" class="prev-btn" small left clear ion-button color="default-blue" (tap)="prev()">
        Sebelumnya
    </button>
    <button *ngIf="!isLastStep()" [disabled]="disabledNextButton()" right clear ion-button color="default-blue" (tap)="next()" class="next-btn" small>
        Selanjutnya
    </button>
    <button *ngIf="isLastStep()" [disabled]="disabledNextButton()" right clear ion-button color="default-blue" (tap)="showDialogSave()" class="next-btn" small>
        <ion-icon name="paper"></ion-icon> Simpan
    </button>
</div>